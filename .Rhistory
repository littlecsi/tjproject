setwd("D:/GitHub/tjproject/R")
setwd("D:/GitHub/tjproject/R/crawling")
setwd("D:/GitHub/tjproject")
####################################################################################################
# Naver News Page by Most Views
# Category : Politics
####################################################################################################
# Library Import
library(rvest)
####################################################################################################
# Functions
clean <- function(x) {
library(stringr)
x <- gsub("\t", "", x)
x <- gsub("\r", "", x)
x <- gsub("\n", "", x)
x <- str_trim(x)
return(x)
}
####################################################################################################
# Crawling
url <- 'https://news.naver.com/main/ranking/popularDay.nhn?rankingType=popular_day&sectionId=100&date=20191112'
html <- read_html(url)
list <- html %>% html_nodes('.ranking_list')
title <- list %>% html_nodes('.ranking_headline') %>% html_nodes('a') %>% html_text()
subti <- list %>% html_nodes('.ranking_lede') %>% html_text()
source <- list %>% html_nodes('.ranking_office') %>% html_text()
view <- list %>% html_nodes('.ranking_view') %>% html_text()
subti <- clean_subti(subti) # removes whitespace, \t, \r, \n
source('D:/GitHub/tjproject/R/crawling/naver_news_by_views.R', echo=TRUE)
####################################################################################################
# Naver News Page by Most Views
# Category : Politics
####################################################################################################
# Library Import
library(rvest)
####################################################################################################
# Functions
clean <- function(x) {
library(stringr)
x <- gsub("\t", "", x)
x <- gsub("\r", "", x)
x <- gsub("\n", "", x)
x <- str_trim(x)
return(x)
}
####################################################################################################
# Crawling
url <- 'https://news.naver.com/main/ranking/popularDay.nhn?rankingType=popular_day&sectionId=100&date=20191112'
html <- read_html(url)
list <- html %>% html_nodes('.ranking_list')
title <- list %>% html_nodes('.ranking_headline') %>% html_nodes('a') %>% html_text()
subti <- list %>% html_nodes('.ranking_lede') %>% html_text()
source <- list %>% html_nodes('.ranking_office') %>% html_text()
view <- list %>% html_nodes('.ranking_view') %>% html_text()
subti <- clean(subti) # removes whitespace, \t, \r, \n
head(subti)
clean_view <- function(x) {
x <- gsub(',', '', x)
return(x)
}
cleanv <- function(x) {
x <- gsub(',', '', x)
return(x)
}
view <- cleanv(view) # removes commas
head(view)
c(1:length(title))
df <- data.frame(rank=c(1:length(title)), title, subti, source, view)
head(df)
head(df[,-c(1,2)])
head(df[,-1])
head(df[,-2])
head(df[-2])
head(df[,c(3,4)])
head(df[,-c(3,4)])
colnames(df)
head(df[c('rank','source','view')])
url + date
date <- '20191112'
url + date
date <- '20191112'
date <- 20191112
paste(url, date, sep='')
####################################################################################################
# Crawling
url <- 'https://news.naver.com/main/ranking/popularDay.nhn?rankingType=popular_day&sectionId=100&date='
date <- 20191112
paste(url, date, sep='')
